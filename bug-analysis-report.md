# Cloudflare Workers Blog - Bug åˆ†ææŠ¥å‘Š

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Cloudflare Workers å’Œ KV å­˜å‚¨çš„åšå®¢ç³»ç»Ÿï¼Œä½¿ç”¨ Mustache.js æ¨¡æ¿å¼•æ“ï¼Œæ”¯æŒ Markdown ç¼–è¾‘ï¼ŒåŒ…å«å‰ç«¯å±•ç¤ºå’Œåå°ç®¡ç†åŠŸèƒ½ã€‚

---

## ğŸ”´ ä¸¥é‡é—®é¢˜ (Critical)

### 1. ç¡¬ç¼–ç çš„æ•æ„Ÿä¿¡æ¯æš´éœ²
**ä½ç½®**: [`index.js:3-10`](index.js:3-10)

**é—®é¢˜æè¿°**:
```javascript
"user" : "lukelzlz", //åå°å¯†ç è¯·ä¿®æ”¹
"password" : "lukelzlz2009", //åå°å¯†ç 
"siteDomain" : "blog.lukelzlz.top",
"cacheZoneId":"685f52ed13388befb75f5964002fdd01",
"cacheToken":"imoekWOlqPCQ6MKrsuL4kZ9_Zbeand0VcBQ1xPiK",
```

**å½±å“**: 
- ç”¨æˆ·åå’Œå¯†ç ç›´æ¥æš´éœ²åœ¨æºä»£ç ä¸­ï¼Œä»»ä½•èƒ½è®¿é—®ä»£ç çš„äººéƒ½èƒ½çœ‹åˆ°
- Cloudflare API Token å’Œ Zone ID ä¹Ÿç¡¬ç¼–ç ï¼Œå­˜åœ¨å®‰å…¨é£é™©
- å¦‚æœä»£ç è¢«æ¨é€åˆ°å…¬å¼€ä»“åº“ï¼Œä¼šå¯¼è‡´ä¸¥é‡çš„å®‰å…¨æ³„éœ²

**å»ºè®®ä¿®å¤**:
- ä½¿ç”¨ Cloudflare Workers ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- åœ¨ `wrangler.toml` ä¸­é…ç½® secrets:
  ```bash
  wrangler secret put USER
  wrangler secret put PASSWORD
  wrangler secret put CACHE_TOKEN
  wrangler secret put CACHE_ZONE_ID
  ```
- åœ¨ä»£ç ä¸­é€šè¿‡ `env` å¯¹è±¡è®¿é—®: `env.USER`, `env.PASSWORD`

---

### 2. HTML æ‹¼å†™é”™è¯¯
**ä½ç½®**: 
- [`themes/jasmine/index.html:12`](themes/jasmine/index.html:12)
- [`themes/jasmine/article.html:12`](themes/jasmine/article.html:12)
- [`themes/jasmine/admin/index.html:10`](themes/jasmine/admin/index.html:10)
- [`themes/jasmine/admin/edit.html:10`](themes/jasmine/admin/edit.html:10)

**é—®é¢˜æè¿°**:
```html
<link rel="shoucut icon" href="...">
```

**å½±å“**: 
- æµè§ˆå™¨æ— æ³•è¯†åˆ« faviconï¼Œå¯¼è‡´ç½‘ç«™å›¾æ ‡æ— æ³•æ˜¾ç¤º
- å½±å“ SEO å’Œç”¨æˆ·ä½“éªŒ

**å»ºè®®ä¿®å¤**:
```html
<link rel="shortcut icon" href="...">
```

---

### 3. XSS å®‰å…¨æ¼æ´ - ç¼–è¾‘å™¨è„šæœ¬æ³¨å…¥
**ä½ç½®**: [`themes/jasmine/admin/edit.html:121`](themes/jasmine/admin/edit.html:121)

**é—®é¢˜æè¿°**:
```javascript
var articleJson = <!--{articleJson}-->;
mdEditor = editormd("content-editor", {
    appendMarkdown: articleJson.contentMD,
```

**å½±å“**:
- å¦‚æœ `articleJson.contentMD` åŒ…å«æ¶æ„è„šæœ¬ï¼Œä¼šç›´æ¥æ³¨å…¥åˆ°é¡µé¢
- å¯èƒ½å¯¼è‡´ XSS æ”»å‡»ï¼Œçªƒå–ç”¨æˆ·æ•°æ®æˆ–æ‰§è¡Œæ¶æ„æ“ä½œ

**å»ºè®®ä¿®å¤**:
- åœ¨æœåŠ¡ç«¯å¯¹ Markdown å†…å®¹è¿›è¡Œè¿‡æ»¤å’Œè½¬ä¹‰
- ä½¿ç”¨ DOMPurify æˆ–ç±»ä¼¼åº“å¯¹ HTML å†…å®¹è¿›è¡Œå‡€åŒ–
- åœ¨ Mustache æ¨¡æ¿ä¸­ä½¿ç”¨ `{{&}}` æ—¶ç¡®ä¿å†…å®¹å·²ç»è¿‡å®‰å…¨å¤„ç†

---

### 4. KV å‘½åç©ºé—´ ID é…ç½®é”™è¯¯
**ä½ç½®**: [`wrangler.toml:7`](wrangler.toml:7)

**é—®é¢˜æè¿°**:
```toml
id = "4552fe2a19274b8393d8979844d8edc8" # è¿™é‡Œçš„ ID åº”è¯¥æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ï¼Œç›®å‰å…ˆç”¨ index.js ä¸­çš„ cacheZoneId ä½œä¸ºå ä½ç¬¦
```

**å½±å“**:
- æ³¨é‡Šè¯´æ˜è¿™ä¸ª ID æ˜¯å ä½ç¬¦ï¼Œä½†å®é™…ä½¿ç”¨çš„æ˜¯ `cacheZoneId`ï¼ˆZone IDï¼‰
- Zone ID å’Œ KV Namespace ID æ˜¯ä¸åŒçš„æ¦‚å¿µ
- ä½¿ç”¨é”™è¯¯çš„ ID ä¼šå¯¼è‡´ KV æ“ä½œå¤±è´¥

**å»ºè®®ä¿®å¤**:
- è·å–æ­£ç¡®çš„ KV Namespace ID:
  ```bash
  wrangler kv:namespace list
  ```
- å°†æ­£ç¡®çš„ KV Namespace ID å¡«å…¥ `wrangler.toml`

---

## ğŸŸ  é«˜ä¼˜å…ˆçº§é—®é¢˜ (High)

### 5. ç¼ºå°‘è¾“å…¥éªŒè¯å’Œæ•°æ®æ¸…ç†
**ä½ç½®**: [`index.js`](index.js) - `saveAddNew` å’Œ `saveEdit` å‡½æ•°

**é—®é¢˜æè¿°**:
```javascript
if("saveAddNew"==e[1]){
    const e=await f(t);
    let r=e.title,n=e.img,a=e.link,i=e.createDate,s=e.category,o=e.tags,
    // æ²¡æœ‰å¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯å’Œæ¸…ç†
```

**å½±å“**:
- æ¶æ„ç”¨æˆ·å¯ä»¥æ³¨å…¥ SQLã€XSS æˆ–å…¶ä»–æ”»å‡»ä»£ç 
- å¯èƒ½å¯¼è‡´æ•°æ®æŸåæˆ–å®‰å…¨æ¼æ´
- åˆ†ç±»å’Œæ ‡ç­¾å¯èƒ½åŒ…å«éæ³•å­—ç¬¦

**å»ºè®®ä¿®å¤**:
- æ·»åŠ è¾“å…¥éªŒè¯å‡½æ•°:
  ```javascript
  function sanitizeInput(input) {
      if (typeof input !== 'string') return input;
      return input.trim()
          .replace(/[<>]/g, '') // ç§»é™¤ HTML æ ‡ç­¾
          .substring(0, 1000); // é™åˆ¶é•¿åº¦
  }
  ```
- å¯¹æ‰€æœ‰ç”¨æˆ·è¾“å…¥è¿›è¡ŒéªŒè¯å’Œæ¸…ç†
- éªŒè¯ URL æ ¼å¼ã€æ—¥æœŸæ ¼å¼ç­‰

---

### 6. é”™è¯¯å¤„ç†ä¸å®Œå–„
**ä½ç½®**: [`index.js`](index.js) - å¤šå¤„å¼‚æ­¥æ“ä½œ

**é—®é¢˜æè¿°**:
```javascript
let a=await g("index"),s=await l("SYSTEM_VALUE_WidgetMenu",!0),
// æ²¡æœ‰ try-catchï¼Œå¦‚æœå¤±è´¥ä¼šå¯¼è‡´æ•´ä¸ªè¯·æ±‚å´©æºƒ
```

**å½±å“**:
- KV è¯»å–å¤±è´¥æ—¶ä¼šå¯¼è‡´é¡µé¢å´©æºƒ
- ç”¨æˆ·çœ‹åˆ° 500 é”™è¯¯è€Œä¸æ˜¯å‹å¥½çš„é”™è¯¯æç¤º
- éš¾ä»¥è°ƒè¯•é—®é¢˜

**å»ºè®®ä¿®å¤**:
```javascript
try {
    let a = await g("index");
    let s = await l("SYSTEM_VALUE_WidgetMenu", true);
    // ...
} catch (error) {
    console.error('Error loading data:', error);
    return new Response('Error loading page', { status: 500 });
}
```

---

### 7. ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜
**ä½ç½®**: [`index.js`](index.js) - ç¼“å­˜å’Œå‘å¸ƒé€»è¾‘

**é—®é¢˜æè¿°**:
```javascript
if("publish"==e[1]){
    // æ¸…ç†ç¼“å­˜
    await async function(t=OPT.cacheZoneId,e=OPT.cacheToken){
        // ...
    }()
    // ä½†å‰ç«¯é¡µé¢å¯èƒ½ä»åœ¨ä½¿ç”¨æ—§ç¼“å­˜
}
```

**å½±å“**:
- ç”¨æˆ·å‘å¸ƒæ–‡ç« åï¼Œå‰ç«¯å¯èƒ½ä»æ˜¾ç¤ºæ—§å†…å®¹
- éœ€è¦å¼ºåˆ¶åˆ·æ–° (Ctrl+F5) æ‰èƒ½çœ‹åˆ°æ›´æ–°
- å½±å“ç”¨æˆ·ä½“éªŒ

**å»ºè®®ä¿®å¤**:
- åœ¨æ¸…ç†ç¼“å­˜åæ·»åŠ ç‰ˆæœ¬å·æˆ–æ—¶é—´æˆ³
- ä½¿ç”¨ Cache-Control: no-cache ç¡®ä¿è·å–æœ€æ–°å†…å®¹
- è€ƒè™‘ä½¿ç”¨ CDN çš„å³æ—¶ç¼“å­˜å¤±æ•ˆåŠŸèƒ½

---

### 8. æ ‡ç­¾æ•°æ®å¤„ç†ä¸ä¸€è‡´
**ä½ç½®**: [`index.js:1`](index.js:1)

**é—®é¢˜æè¿°**:
```javascript
// saveAddNew ä¸­
let r=e.title,n=e.img,a=e.link,i=e.createDate,s=e.category,o=e.tags,
// tags å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼ˆé€—å·åˆ†éš”ï¼‰æˆ–æ•°ç»„

// ä½†åœ¨å…¶ä»–åœ°æ–¹æœŸæœ›æ˜¯æ•°ç»„
if("object"==typeof t[r].tags)
    for(var n=0;n<t[r].tags.length;n++)
```

**å½±å“**:
- æ ‡ç­¾æ•°æ®ç±»å‹ä¸ä¸€è‡´å¯èƒ½å¯¼è‡´æ˜¾ç¤ºé”™è¯¯
- åœ¨æŸäº›æƒ…å†µä¸‹ tags å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåœ¨å¦ä¸€äº›æƒ…å†µä¸‹æ˜¯æ•°ç»„
- å¯¼è‡´æ¨¡æ¿æ¸²æŸ“å¤±è´¥

**å»ºè®®ä¿®å¤**:
```javascript
// ç»Ÿä¸€å¤„ç†æ ‡ç­¾æ•°æ®
function normalizeTags(tags) {
    if (Array.isArray(tags)) return tags;
    if (typeof tags === 'string') {
        return tags.split(',').map(t => t.trim()).filter(t => t);
    }
    return [];
}
```

---

### 9. åˆ†é¡µé€»è¾‘æ½œåœ¨é—®é¢˜
**ä½ç½®**: [`index.js:1`](index.js) - `getKVArticleCategory` å’Œ `getKVIndex` å‡½æ•°

**é—®é¢˜æè¿°**:
```javascript
e=e<=1?1:e; // é¡µç å°äº1æ—¶è®¾ä¸º1
// ä½†æ²¡æœ‰å¤„ç†è´Ÿæ•°ã€éæ•°å­—ç­‰æƒ…å†µ
```

**å½±å“**:
- å¦‚æœä¼ å…¥è´Ÿæ•°æˆ–éæ•°å­—ï¼Œå¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸º
- æ²¡æœ‰æœ€å¤§é¡µæ•°é™åˆ¶ï¼Œå¯èƒ½è¿”å›ç©ºç»“æœ

**å»ºè®®ä¿®å¤**:
```javascript
function validatePageNumber(page) {
    const pageNum = parseInt(page);
    if (isNaN(pageNum) || pageNum < 1) return 1;
    return pageNum;
}
```

---

### 10. ç¼–è¾‘å™¨åˆå§‹åŒ–é—®é¢˜ - å¤šé€‰åˆ†ç±»æœªæ­£ç¡®è®¾ç½®
**ä½ç½®**: [`themes/jasmine/admin/edit.html:147-152`](themes/jasmine/admin/edit.html:147-152)

**é—®é¢˜æè¿°**:
```javascript
var categorySelect = $('#category');
categorySelect.empty();
for (var i = 0; i < categoryJson.length; i++) {
    categorySelect.append('<option value="' + categoryJson[i] + '">' + categoryJson[i] + '</option>');
}
$('#category').val(articleJson.category);
```

**å½±å“**:
- `articleJson.category` å¯èƒ½æ˜¯æ•°ç»„ï¼Œä½† `val()` æ–¹æ³•å¯¹å¤šé€‰çš„å¤„ç†å¯èƒ½ä¸æ­£ç¡®
- å¦‚æœ `category` ä¸æ˜¯æ•°ç»„ï¼Œä¼šå¯¼è‡´é€‰æ‹©å¤±è´¥

**å»ºè®®ä¿®å¤**:
```javascript
if (Array.isArray(articleJson.category)) {
    $('#category').val(articleJson.category);
} else if (articleJson.category) {
    $('#category').val([articleJson.category]);
}
```

---

## ğŸŸ¡ ä¸­ä¼˜å…ˆçº§é—®é¢˜ (Medium)

### 11. æœç´¢åŠŸèƒ½æœªå®ç°
**ä½ç½®**: [`index.js:1`](index.js:1) - è·¯ç”±å¤„ç†

**é—®é¢˜æè¿°**:
```javascript
if("search"!=r)
    return"admin"==r?...
// search è·¯ç”±è¢«å¿½ç•¥ï¼Œæ²¡æœ‰å®ç°æœç´¢åŠŸèƒ½
```

**å½±å“**:
- ç”¨æˆ·æ— æ³•æœç´¢æ–‡ç« 
- é™ä½äº†åšå®¢çš„å¯ç”¨æ€§

**å»ºè®®ä¿®å¤**:
- å®ç°æœç´¢åŠŸèƒ½:
  ```javascript
  if("search"==r && i.length>0) {
      const query = i[1];
      // åœ¨ SYSTEM_INDEX_LIST ä¸­æœç´¢æ ‡é¢˜å’Œå†…å®¹
      // è¿”å›æœç´¢ç»“æœé¡µé¢
  }
  ```

---

### 12. ä»£ç é‡å¤ - ä¸»é¢˜åˆ‡æ¢é€»è¾‘
**ä½ç½®**: 
- [`themes/jasmine/index.html:19-26`](themes/jasmine/index.html:19-26)
- [`themes/jasmine/article.html:19-26`](themes/jasmine/article.html:19-26)
- [`themes/jasmine/admin/index.html:22-27`](themes/jasmine/admin/index.html:22-27)
- [`themes/jasmine/admin/edit.html:18-24`](themes/jasmine/admin/edit.html:18-24)

**é—®é¢˜æè¿°**:
æ¯ä¸ªé¡µé¢éƒ½æœ‰ç›¸åŒçš„ä¸»é¢˜åˆ‡æ¢ä»£ç 

**å½±å“**:
- ä»£ç é‡å¤ï¼Œç»´æŠ¤å›°éš¾
- å¦‚æœéœ€è¦ä¿®æ”¹ä¸»é¢˜åˆ‡æ¢é€»è¾‘ï¼Œéœ€è¦ä¿®æ”¹å¤šå¤„

**å»ºè®®ä¿®å¤**:
- å°†ä¸»é¢˜åˆ‡æ¢é€»è¾‘æå–åˆ°å•ç‹¬çš„ JS æ–‡ä»¶
- åœ¨æ‰€æœ‰é¡µé¢ä¸­å¼•ç”¨è¯¥æ–‡ä»¶

---

### 13. ç¼–è¾‘å™¨é…ç½®ä¸ä¸€è‡´
**ä½ç½®**: 
- [`themes/jasmine/admin/index.html:264-276`](themes/jasmine/admin/index.html:264-276)
- [`themes/jasmine/admin/edit.html:124-136`](themes/jasmine/admin/edit.html:124-136)

**é—®é¢˜æè¿°**:
ä¸¤ä¸ªé¡µé¢çš„ç¼–è¾‘å™¨é…ç½®ç•¥æœ‰ä¸åŒï¼Œä½†å¤§éƒ¨åˆ†ç›¸åŒ

**å½±å“**:
- é…ç½®ä¸ä¸€è‡´å¯èƒ½å¯¼è‡´ç”¨æˆ·ä½“éªŒä¸ç»Ÿä¸€
- ç»´æŠ¤å›°éš¾

**å»ºè®®ä¿®å¤**:
- ç»Ÿä¸€ç¼–è¾‘å™¨é…ç½®
- æå–é…ç½®åˆ°å•ç‹¬çš„å˜é‡æˆ–å‡½æ•°

---

### 14. è¡¨å•æäº¤ç¼ºå°‘ Loading çŠ¶æ€
**ä½ç½®**: 
- [`themes/jasmine/admin/index.html`](themes/jasmine/admin/index.html)
- [`themes/jasmine/admin/edit.html`](themes/jasmine/admin/edit.html)

**é—®é¢˜æè¿°**:
æ‰€æœ‰ AJAX è¯·æ±‚éƒ½æ²¡æœ‰æ˜¾ç¤ºåŠ è½½çŠ¶æ€

**å½±å“**:
- ç”¨æˆ·ä¸çŸ¥é“è¯·æ±‚æ˜¯å¦æ­£åœ¨å¤„ç†
- å¯èƒ½é‡å¤ç‚¹å‡»æäº¤æŒ‰é’®

**å»ºè®®ä¿®å¤**:
```javascript
function saveEdit() {
    const btn = $('#btn_saveEdit');
    btn.prop('disabled', true).text('ä¿å­˜ä¸­...');
    
    $.ajax({
        // ...
        complete: function() {
            btn.prop('disabled', false).text('ä¿å­˜ä¿®æ”¹');
        }
    });
}
```

---

### 15. åˆ é™¤æ–‡ç« åæœªæ¸…ç†ç¼“å­˜
**ä½ç½®**: [`themes/jasmine/admin/edit.html:168-182`](themes/jasmine/admin/edit.html:168-182)

**é—®é¢˜æè¿°**:
```javascript
function deleteArticle() {
    // åˆ é™¤æ–‡ç« åç›´æ¥è·³è½¬
    if (result.rst) window.location.href = "/admin/";
    // æ²¡æœ‰æ¸…ç†ç¼“å­˜
}
```

**å½±å“**:
- åˆ é™¤çš„æ–‡ç« å¯èƒ½ä»åœ¨ç¼“å­˜ä¸­
- ç”¨æˆ·å¯èƒ½ä»ç„¶èƒ½çœ‹åˆ°å·²åˆ é™¤çš„æ–‡ç« 
- éœ€è¦å‘å¸ƒæ‰èƒ½ç”Ÿæ•ˆ

**å»ºè®®ä¿®å¤**:
- åˆ é™¤åè‡ªåŠ¨æ¸…ç†ç›¸å…³ç¼“å­˜
- æˆ–æç¤ºç”¨æˆ·éœ€è¦å‘å¸ƒ

---

### 16. å¯¼å…¥åŠŸèƒ½ç¼ºå°‘æ•°æ®éªŒè¯
**ä½ç½®**: [`themes/jasmine/admin/index.html:373-391`](themes/jasmine/admin/index.html:373-391)

**é—®é¢˜æè¿°**:
```javascript
function importBlog() {
    try {
        JSON.parse($('#importJson').val());
    } catch (e) {
        alert("å¯¼å…¥æ ¼å¼é”™è¯¯");
        return;
    }
    // åªéªŒè¯äº† JSON æ ¼å¼ï¼Œæ²¡æœ‰éªŒè¯æ•°æ®ç»“æ„
}
```

**å½±å“**:
- å¯èƒ½å¯¼å…¥æ ¼å¼é”™è¯¯çš„æ•°æ®
- å¯¼è‡´ç³»ç»Ÿå¼‚å¸¸

**å»ºè®®ä¿®å¤**:
- éªŒè¯å¯¼å…¥æ•°æ®çš„ç»“æ„
- æ£€æŸ¥å¿…éœ€å­—æ®µ
- é™åˆ¶å¯¼å…¥æ•°æ®é‡

---

### 17. å¤–éƒ¨ CDN èµ„æºä¾èµ–
**ä½ç½®**: æ‰€æœ‰ HTML æ–‡ä»¶

**é—®é¢˜æè¿°**:
å¤§é‡ä½¿ç”¨å¤–éƒ¨ CDN èµ„æº:
- `https://b.lukelzlz.top/usr/themes/jasmine/...`
- `https://cdn.jsdelivr.net/...`

**å½±å“**:
- å¦‚æœ CDN ä¸å¯ç”¨ï¼Œç½‘ç«™æ— æ³•æ­£å¸¸å·¥ä½œ
- åŠ è½½é€Ÿåº¦å—ç½‘ç»œå½±å“
- å­˜åœ¨å®‰å…¨é£é™©ï¼ˆå¦‚æœ CDN è¢«åŠ«æŒï¼‰

**å»ºè®®ä¿®å¤**:
- è€ƒè™‘å°†å…³é”®èµ„æºæœ¬åœ°åŒ–
- ä½¿ç”¨å¯é çš„ CDNï¼ˆå¦‚ Cloudflare CDNï¼‰
- æ·»åŠ èµ„æºåŠ è½½å¤±è´¥çš„é™çº§å¤„ç†

---

### 18. æ—¥æœŸæ ¼å¼å¤„ç†é—®é¢˜
**ä½ç½®**: [`themes/jasmine/admin/edit.html:142`](themes/jasmine/admin/edit.html:142)

**é—®é¢˜æè¿°**:
```javascript
$('#createDate').val(articleJson.createDate.replace(" ", "T"));
```

**å½±å“**:
- å‡è®¾æ—¥æœŸæ ¼å¼æ€»æ˜¯ "YYYY-MM-DD HH:mm:ss"
- å¦‚æœæ ¼å¼ä¸åŒï¼Œä¼šå¯¼è‡´æ˜¾ç¤ºé”™è¯¯

**å»ºè®®ä¿®å¤**:
```javascript
function formatDateForInput(dateString) {
    try {
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return '';
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        const hours = String(date.getHours()).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');
        return `${year}-${month}-${day}T${hours}:${minutes}`;
    } catch (e) {
        return '';
    }
}
```

---

### 19. ç¼“å­˜æ—¶é—´é…ç½®ä¸åˆç†
**ä½ç½®**: [`index.js:15`](index.js:15)

**é—®é¢˜æè¿°**:
```javascript
"cacheTime" : 60*60*24*0.5, //ç½‘é¡µç¼“å­˜æ—¶é•¿(ç§’),å»ºè®®=æ–‡ç« æ›´æ–°é¢‘ç‡
```

**å½±å“**:
- ç¼“å­˜æ—¶é—´ä¸º 12 å°æ—¶
- å¦‚æœæ–‡ç« æ›´æ–°é¢‘ç¹ï¼Œç”¨æˆ·å¯èƒ½çœ‹åˆ°æ—§å†…å®¹
- å¦‚æœæ–‡ç« å¾ˆå°‘æ›´æ–°ï¼Œç¼“å­˜æ—¶é—´å¯èƒ½å¤ªçŸ­

**å»ºè®®ä¿®å¤**:
- æ ¹æ®å®é™…æ›´æ–°é¢‘ç‡è°ƒæ•´ç¼“å­˜æ—¶é—´
- è€ƒè™‘ä½¿ç”¨æ›´çµæ´»çš„ç¼“å­˜ç­–ç•¥
- å¯¹äºç»å¸¸æ›´æ–°çš„å†…å®¹ï¼Œä½¿ç”¨æ›´çŸ­çš„ç¼“å­˜æ—¶é—´

---

### 20. ç¼ºå°‘æ—¥å¿—è®°å½•
**ä½ç½®**: æ•´ä¸ªé¡¹ç›®

**é—®é¢˜æè¿°**:
åªæœ‰å°‘é‡ `console.log`ï¼Œæ²¡æœ‰ç³»ç»ŸåŒ–çš„æ—¥å¿—è®°å½•

**å½±å“**:
- éš¾ä»¥è¿½è¸ªé—®é¢˜å’Œé”™è¯¯
- æ— æ³•åˆ†æç”¨æˆ·è¡Œä¸º
- è°ƒè¯•å›°éš¾

**å»ºè®®ä¿®å¤**:
- å®ç°æ—¥å¿—è®°å½•ç³»ç»Ÿ
- è®°å½•å…³é”®æ“ä½œï¼ˆå‘å¸ƒã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- è®°å½•é”™è¯¯å’Œå¼‚å¸¸

---

## ğŸŸ¢ ä½ä¼˜å…ˆçº§é—®é¢˜ (Low)

### 21. ä»£ç å¯è¯»æ€§ - å‹ç¼©çš„ä»£ç 
**ä½ç½®**: [`index.js:32`](index.js:32)

**é—®é¢˜æè¿°**:
å¤§éƒ¨åˆ†ä»£ç æ˜¯å‹ç¼©çš„ï¼Œéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤

**å½±å“**:
- éš¾ä»¥ç†è§£å’Œä¿®æ”¹ä»£ç 
- è°ƒè¯•å›°éš¾

**å»ºè®®ä¿®å¤**:
- æ ¼å¼åŒ–ä»£ç 
- æ·»åŠ æ³¨é‡Š
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å

---

### 22. ç¼ºå°‘å“åº”å¼å›¾ç‰‡
**ä½ç½®**: [`themes/jasmine/index.html:36`](themes/jasmine/index.html:36)

**é—®é¢˜æè¿°**:
```html
<img class="rounded" src="https://cdn.lukelzlz.top/head.png" loading="lazy" width="50" height="50" alt="{{ &OPT.siteName }}"/>
```

**å½±å“**:
- åœ¨ä¸åŒè®¾å¤‡ä¸Šå¯èƒ½ä¸æ˜¯æœ€ä½³å°ºå¯¸
- å½±å“åŠ è½½é€Ÿåº¦

**å»ºè®®ä¿®å¤**:
- ä½¿ç”¨ `srcset` å±æ€§æä¾›å¤šç§å°ºå¯¸
- ä½¿ç”¨ `picture` å…ƒç´ 

---

### 23. SEO ä¼˜åŒ–ä¸è¶³
**ä½ç½®**: æ‰€æœ‰ HTML æ–‡ä»¶

**é—®é¢˜æè¿°**:
- ç¼ºå°‘ Open Graph æ ‡ç­¾
- ç¼ºå°‘ Twitter Card æ ‡ç­¾
- ç¼ºå°‘ç»“æ„åŒ–æ•°æ®

**å½±å“**:
- ç¤¾äº¤åª’ä½“åˆ†äº«æ•ˆæœå·®
- æœç´¢å¼•æ“æ’åå¯èƒ½å—å½±å“

**å»ºè®®ä¿®å¤**:
- æ·»åŠ  Open Graph æ ‡ç­¾
- æ·»åŠ  Twitter Card æ ‡ç­¾
- æ·»åŠ  JSON-LD ç»“æ„åŒ–æ•°æ®

---

### 24. ç¼ºå°‘ 404 é¡µé¢
**ä½ç½®**: [`index.js:17`](index.js:17)

**é—®é¢˜æè¿°**:
```javascript
"html404" : `<b>404</b>`,//404é¡µé¢ä»£ç 
```

**å½±å“**:
- 404 é¡µé¢å¤ªç®€å•
- ç”¨æˆ·ä½“éªŒå·®

**å»ºè®®ä¿®å¤**:
- è®¾è®¡ä¸€ä¸ªå‹å¥½çš„ 404 é¡µé¢
- æä¾›è¿”å›é¦–é¡µçš„é“¾æ¥
- æ·»åŠ æœç´¢æ¡†

---

### 25. ç¼ºå°‘è®¿é—®ç»Ÿè®¡
**ä½ç½®**: æ•´ä¸ªé¡¹ç›®

**é—®é¢˜æè¿°**:
æ²¡æœ‰è®¿é—®ç»Ÿè®¡åŠŸèƒ½

**å½±å“**:
- æ— æ³•äº†è§£æ–‡ç« å—æ¬¢è¿ç¨‹åº¦
- æ— æ³•åˆ†æç”¨æˆ·è¡Œä¸º

**å»ºè®®ä¿®å¤**:
- é›†æˆ Google Analytics æˆ–å…¶ä»–ç»Ÿè®¡å·¥å…·
- è®°å½•æ–‡ç« é˜…è¯»æ¬¡æ•°

---

### 26. ç¼ºå°‘è¯„è®ºç³»ç»Ÿ
**ä½ç½®**: [`index.js:20`](index.js:20)

**é—®é¢˜æè¿°**:
```javascript
"commentCode":``,//è¯„è®ºåŒºä»£ç 
```

**å½±å“**:
- ç”¨æˆ·æ— æ³•è¯„è®º
- ç¼ºå°‘äº’åŠ¨åŠŸèƒ½

**å»ºè®®ä¿®å¤**:
- é›†æˆç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼ˆå¦‚ Disqusã€Gitalkï¼‰
- æˆ–å®ç°ç®€å•çš„è¯„è®ºåŠŸèƒ½

---

### 27. ç§»åŠ¨ç«¯å¯¼èˆªä½“éªŒå¯ä¼˜åŒ–
**ä½ç½®**: [`themes/jasmine/index.html:100-119`](themes/jasmine/index.html:100-119)

**é—®é¢˜æè¿°**:
ç§»åŠ¨ç«¯ä½¿ç”¨ offcanvasï¼Œä½†ä½“éªŒå¯ä»¥ä¼˜åŒ–

**å½±å“**:
- ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒä¸å¤Ÿæµç•…

**å»ºè®®ä¿®å¤**:
- ä¼˜åŒ–ç§»åŠ¨ç«¯å¯¼èˆª
- æ·»åŠ æ‰‹åŠ¿æ”¯æŒ

---

### 28. ç¼ºå°‘æ–‡ç« æœç´¢åŠŸèƒ½
**ä½ç½®**: æ•´ä¸ªé¡¹ç›®

**é—®é¢˜æè¿°**:
æ²¡æœ‰æ–‡ç« æœç´¢åŠŸèƒ½

**å½±å“**:
- ç”¨æˆ·éš¾ä»¥æ‰¾åˆ°ç‰¹å®šæ–‡ç« 
- é™ä½å¯ç”¨æ€§

**å»ºè®®ä¿®å¤**:
- å®ç°å…¨æ–‡æœç´¢
- æ·»åŠ æœç´¢æ¡†

---

### 29. ç¼ºå°‘æ–‡ç« å½’æ¡£åŠŸèƒ½
**ä½ç½®**: æ•´ä¸ªé¡¹ç›®

**é—®é¢˜æè¿°**:
æ²¡æœ‰æŒ‰æ—¥æœŸå½’æ¡£æ–‡ç« çš„åŠŸèƒ½

**å½±å“**:
- éš¾ä»¥æµè§ˆå†å²æ–‡ç« 
- é™ä½å¯ç”¨æ€§

**å»ºè®®ä¿®å¤**:
- å®ç°æŒ‰æœˆ/å¹´å½’æ¡£
- æ·»åŠ å½’æ¡£é¡µé¢

---

### 30. ç¼ºå°‘ RSS è®¢é˜…
**ä½ç½®**: æ•´ä¸ªé¡¹ç›®

**é—®é¢˜æè¿°**:
æ²¡æœ‰ RSS è®¢é˜…åŠŸèƒ½

**å½±å“**:
- ç”¨æˆ·æ— æ³•è®¢é˜…æ›´æ–°
- é™ä½ç”¨æˆ·ç²˜æ€§

**å»ºè®®ä¿®å¤**:
- å®ç° RSS è®¢é˜…
- æ·»åŠ  RSS é“¾æ¥

---

## æ€»ç»“

### é—®é¢˜ç»Ÿè®¡
- ğŸ”´ ä¸¥é‡é—®é¢˜: 4 ä¸ª
- ğŸŸ  é«˜ä¼˜å…ˆçº§: 10 ä¸ª
- ğŸŸ¡ ä¸­ä¼˜å…ˆçº§: 8 ä¸ª
- ğŸŸ¢ ä½ä¼˜å…ˆçº§: 10 ä¸ª

### ä¼˜å…ˆä¿®å¤å»ºè®®

1. **ç«‹å³ä¿®å¤**ï¼ˆä¸¥é‡é—®é¢˜ï¼‰:
   - ç§»é™¤ç¡¬ç¼–ç çš„æ•æ„Ÿä¿¡æ¯
   - ä¿®å¤ HTML æ‹¼å†™é”™è¯¯
   - ä¿®å¤ XSS å®‰å…¨æ¼æ´
   - ä¿®æ­£ KV å‘½åç©ºé—´ ID

2. **å°½å¿«ä¿®å¤**ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰:
   - æ·»åŠ è¾“å…¥éªŒè¯
   - å®Œå–„é”™è¯¯å¤„ç†
   - è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜
   - ç»Ÿä¸€æ ‡ç­¾æ•°æ®å¤„ç†

3. **è®¡åˆ’ä¿®å¤**ï¼ˆä¸­ä½ä¼˜å…ˆçº§ï¼‰:
   - å®ç°æœç´¢åŠŸèƒ½
   - ä¼˜åŒ–ä»£ç ç»“æ„
   - æ”¹è¿›ç”¨æˆ·ä½“éªŒ
   - æ·»åŠ æ›´å¤šåŠŸèƒ½

### å®‰å…¨å»ºè®®

1. å®šæœŸæ›´æ–°ä¾èµ–åŒ…
2. ä½¿ç”¨ HTTPS
3. å®æ–½å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)
4. å®šæœŸå¤‡ä»½ KV æ•°æ®
5. ç›‘æ§å¼‚å¸¸è®¿é—®

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-01-17
**åˆ†æäººå‘˜**: Kilo Code (Architect Mode)
